"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[648],{648:(F,d,s)=>{s.r(d),s.d(d,{SignUpPageModule:()=>V});var p=s(1368),a=s(6504),c=s(9548),g=s(6676),u=s(1528),v=s(3756),f=s.n(v);class h{static matchValues(i){return r=>r.value!==i.value?{noMatch:!0}:null}}var e=s(4496),C=s(5359),P=s(3540),y=s(4888),_=s(416),O=s(8208);function M(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," El nombre es requerido "),e.C$Y())}function S(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," El nombre debe tener al menos 4 caracteres "),e.C$Y())}function E(n,i){if(1&n&&(e.I0R(0,"div",12),e.yuY(1,M,2,0,"div",13)(2,S,2,0,"div",13),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.usuario.errors?null:r.form.controls.usuario.errors.required),e.yG2(),e.E7m("ngIf",null==r.form.controls.usuario.errors?null:r.form.controls.usuario.errors.minLenght)}}function I(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," El correo es requerido "),e.C$Y())}function b(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," Ingrese un correo valido "),e.C$Y())}function U(n,i){if(1&n&&(e.I0R(0,"div",12),e.yuY(1,I,2,0,"div",13)(2,b,2,0,"div",13),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.correo.errors?null:r.form.controls.correo.errors.required),e.yG2(),e.E7m("ngIf",null==r.form.controls.correo.errors?null:r.form.controls.correo.errors.email)}}function x(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," El n\xfamero es requerido "),e.C$Y())}function G(n,i){if(1&n&&(e.I0R(0,"div",12),e.yuY(1,x,2,0,"div",13),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.telefono.errors?null:r.form.controls.telefono.errors.required)}}function R(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," La contrase\xf1a es requerida "),e.C$Y())}function Y(n,i){if(1&n&&(e.I0R(0,"div",12),e.yuY(1,R,2,0,"div",13),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.contrasena.errors?null:r.form.controls.contrasena.errors.required)}}function $(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," La contrase\xf1a es requerida "),e.C$Y())}function w(n,i){1&n&&(e.I0R(0,"div"),e.OEk(1," Las contrase\xf1as no coinciden "),e.C$Y())}function T(n,i){if(1&n&&(e.I0R(0,"div",12),e.yuY(1,$,2,0,"div",13)(2,w,2,0,"div",13),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.confirmarContrasena.errors?null:r.form.controls.confirmarContrasena.errors.required),e.yG2(),e.E7m("ngIf",null==r.form.controls.confirmarContrasena.errors?null:r.form.controls.confirmarContrasena.errors.noMatch)}}const A=[{path:"",component:(()=>{var n;class i{constructor(t,o,l,m){this.authService=t,this.alertController=o,this.router=l,this.phoneCleanupService=m,this.form=new a.WC({correo:new a.Ku("",[a.AQ.required,a.AQ.email]),contrasena:new a.Ku("",[a.AQ.required]),confirmarContrasena:new a.Ku(""),usuario:new a.Ku("",[a.AQ.required,a.AQ.minLength(4)]),telefono:new a.Ku("",[a.AQ.required,a.AQ.minLength(10),a.AQ.maxLength(14)])})}ngOnInit(){this.confirmPasswordValidator()}confirmPasswordValidator(){this.form.controls.confirmarContrasena.setValidators([a.AQ.required,h.matchValues(this.form.controls.contrasena)]),this.form.controls.confirmarContrasena.updateValueAndValidity()}submit(){if(this.form.valid){const t=this.form.value;if(t.contrasena!==t.confirmarContrasena)return void this.contrasenaAlert("Error","La contrase\xf1a y la confirmaci\xf3n de contrase\xf1a no coinciden");const o=this.phoneCleanupService.cleanPhoneNumber(this.form.get("telefono").value);console.log(this.phoneCleanupService),this.authService.registerUser(t.contrasena,t.correo,t.usuario,o).subscribe(l=>{console.log("Usuario registrado con \xe9xito",l),this.mostrarMensajeBienvenida(),this.redirigirASiguientePagina()},l=>{console.error("Error al registrar usuario",l),this.mostrarAlerta("\xc9rror","Usuario no pudo ser registrado ")})}}formatoCelularContacto(t){if(!t.value)return;let o=t.value.toString();o=o.replace(/\D/g,""),o.length>10?o=o.slice(0,10):(10===o.length?o=`(${o.slice(0,3)}) ${o.slice(3,6)}-${o.slice(6)}`:o.length>10&&o.length<=14&&(o=`+${o.slice(0,o.length-10)} (${o.slice(o.length-10,o.length-7)}) ${o.slice(o.length-7,o.length-4)}-${o.slice(o.length-4)}`),t.setValue(o))}ConvertirenMinusculas(t){t.value.length<120&&t.setValue(t.value.toLowerCase()),t.setValue(t.value.toLowerCase().substring(0,120))}registerAlert(t,o){var l=this;return(0,u.c)(function*(){yield(yield l.alertController.create({header:"\xa1Bienvenido!",message:"Registro exitoso.",buttons:["OK"]})).present()})()}mostrarMensajeBienvenida(){return(0,u.c)(function*(){f().fire({title:"Bienvenido",text:"Usuario registrado con exito",icon:"success",timer:3e3,showConfirmButton:!1}),document.body.classList.remove("swal2-height-auto")})()}errorAlert(t,o){var l=this;return(0,u.c)(function*(){yield(yield l.alertController.create({header:"Error",message:"Hubo un error al registrar el usuario",buttons:["OK"]})).present()})()}mostrarAlerta(t,o){return(0,u.c)(function*(){f().fire({title:t,text:o,icon:"error",timer:3e3,showConfirmButton:!1}),document.body.classList.remove("swal2-height-auto")})()}contrasenaAlert(t,o){var l=this;return(0,u.c)(function*(){yield(yield l.alertController.create({header:"Error",message:"Hubo un error al registrar el usuario, contrase\xf1a no coincide",buttons:["OK"]})).present()})()}redirigirASiguientePagina(){console.log("Redirigiendo a la siguiente p\xe1gina..."),this.router.navigate(["/main/folio"])}}return(n=i).\u0275fac=function(t){return new(t||n)(e.GI1(C.o),e.GI1(c.iW),e.GI1(g.E5),e.GI1(P.u))},n.\u0275cmp=e.In1({type:n,selectors:[["app-sign-up"]],decls:18,vars:14,consts:[["backButton","/main/home","title","Registro"],[1,"d-flex-center"],[1,"auth-form",3,"formGroup","ngSubmit","keypress.enter"],["Logo","true"],["autocomplete","name","icon","person-outline","type","text","label","Nombre completo: ",3,"control","maxlength"],["class","validators",4,"ngIf"],["autocomplete","email","icon","mail-outline","type","email","label","Correo: ",3,"control","input"],["autocomplete","phone","icon","call-outline","type","phone","label","Tel\xe9fono: ",3,"control","maxlength","input"],["icon","lock-closed-outline","type","password","label","Contrase\xf1a: ",3,"control"],["icon","lock-closed-outline","type","password","label","Confirmar contrase\xf1a: ",3,"control"],["expand","block","mode","ios","type","submit","color","medium","shape","round",1,"submit",3,"disabled"],["slot","end","name","person-add-outline"],[1,"validators"],[4,"ngIf"]],template:function(t,o){1&t&&(e.wR5(0,"app-header",0),e.I0R(1,"ion-content")(2,"div",1)(3,"form",2),e.qCj("ngSubmit",function(){return o.submit()})("keypress.enter",function(){return o.submit()}),e.wR5(4,"app-logo",3)(5,"app-custom-input",4),e.yuY(6,E,3,2,"div",5),e.I0R(7,"app-custom-input",6),e.qCj("input",function(){return o.ConvertirenMinusculas(o.form.controls.correo)}),e.C$Y(),e.yuY(8,U,3,2,"div",5),e.I0R(9,"app-custom-input",7),e.qCj("input",function(){return o.formatoCelularContacto(o.form.controls.telefono)}),e.C$Y(),e.yuY(10,G,2,1,"div",5),e.wR5(11,"app-custom-input",8),e.yuY(12,Y,2,1,"div",5),e.wR5(13,"app-custom-input",9),e.yuY(14,T,3,2,"div",5),e.I0R(15,"ion-button",10),e.OEk(16," Resgistrar "),e.wR5(17,"ion-icon",11),e.C$Y()()()()),2&t&&(e.yG2(3),e.E7m("formGroup",o.form),e.yG2(2),e.E7m("control",o.form.controls.usuario)("maxlength",25),e.yG2(),e.E7m("ngIf",o.form.controls.usuario.errors&&o.form.controls.usuario),e.yG2(),e.E7m("control",o.form.controls.correo),e.yG2(),e.E7m("ngIf",o.form.controls.correo.errors&&o.form.controls.correo.touched),e.yG2(),e.E7m("control",o.form.controls.telefono)("maxlength",14),e.yG2(),e.E7m("ngIf",o.form.controls.telefono.errors&&o.form.controls.telefono.touched),e.yG2(),e.E7m("control",o.form.controls.contrasena),e.yG2(),e.E7m("ngIf",o.form.controls.contrasena.errors&&o.form.controls.contrasena.touched),e.yG2(),e.E7m("control",o.form.controls.confirmarContrasena),e.yG2(),e.E7m("ngIf",o.form.controls.confirmarContrasena.errors&&o.form.controls.confirmarContrasena.touched),e.yG2(),e.E7m("disabled",o.form.invalid))},dependencies:[p.u_,a.sz,a.u,c.sn,c._i,c.Ko,y.k,_.y,O.w,a.uW],styles:["ion-button[_ngcontent-%COMP%]{text-transform:none}.safe-p-bottom[_ngcontent-%COMP%]{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.submit[_ngcontent-%COMP%]{margin-top:40px}.empty[_ngcontent-%COMP%]{text-align:center;padding:60px;opacity:30%}.empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:100px}.d-flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.custom-input[_ngcontent-%COMP%]{--border-color: #e0e0e0;--border-radius: 15px;--border-style: solid;--border-width: 1px;margin:20px 0}.custom-input[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{position:relative;bottom:2px}.custom-input[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:relative;top:13px}.validators[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:13px;text-align:center}.auth-form[_ngcontent-%COMP%]{width:100%;text-align:center;padding:1%}.product-item[_ngcontent-%COMP%]{--padding-top: 20px}.product-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:70px;height:80px;--border-radius: 15px}.product-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;padding-bottom:5px}.product-item[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{font-size:13px}.product-item[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:500}.product-item[_ngcontent-%COMP%]   .option-btn[_ngcontent-%COMP%]{font-size:27px}.product-item[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:14px;border-radius:10px;margin-left:0}@media (min-width: 769px){.auth-form[_ngcontent-%COMP%]{width:40%}.add-update-modal[_ngcontent-%COMP%]{--height: 680px}}"]}),i})()}];let L=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.a4G({type:n}),n.\u0275inj=e.s3X({imports:[g.qQ.forChild(A),g.qQ]}),i})();var Q=s(9280);let V=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.a4G({type:n}),n.\u0275inj=e.s3X({imports:[p.MD,a.y,c.wZ,L,Q.k]}),i})()}}]);